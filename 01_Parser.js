let regionText = "4517,77,4205,1705,17601,6505,6404,4210,2802,126,17203,8201,5606,4520,18501,1008,23,7501,49,17001,6403,17211,61,4303,316,5409,200002,27,2806,81,1716,701,703,50,6102,5627,78,7802,4523,7601,7803,207,10801,200017,809,702,4313,56,5607,6401,24,80,6002,6302,1715,8109,1710,1729,707,10001,19302,1703,1723,1724,717,5626,6202,4206,4511,79,4307,5605,4403,200016,82,200044,120,4217,4218,6402,59,4413,4420,4208,1502,5615,200065,2201,1,46,4418,200003,16801,6101,801,37,810,52,6501,4207,4215,8102,4305,3855,26,1308,34,39,17204,4422,72,200029,1707,710,6606,1504,2807,3836,3,4408,66,4702,4201,10401,3503,1725,4301,2001,2010,5604,9701,4101,3853,3603,25,305,102,1907,116,902,17801,2202,1704,4008,1717,1718,714,14,16,4412,4701,901,1706,9901,704,2505,204,4315,5620,3843,10502,5407,307,4405,1604,13401,10601,4203,3202,908,1708,1709,1712,716,7404,2,19,1303,48,55,4414,64,9801,3915,86,2403,14701,115,200057,200071,914,916,4503,5816,1722,11201,1731,708,205,10701,4309,4312,4320,5618,5622,1801,3854,14101,38,15401,47,304,51,4407,4411,4415,69,71,200013,1102,2907,2405,6506,3701,119,7801,123,10901,4508,1720,1730,4302,4308,4310,5633,10501,1806,14901,4409,17213,68,5704,84,6503,200041,112,6001,124,4504,4516,8101,8110,8111,1713,19401,715,5601,18401,7410,5619,2805,3832,3835,3609,3610,5403,33,5410,806,40,41,6703,6707,315,62,1601,200001,4423,76,11601,15701,90,2402,2407,106,1903,113,117,121,122,129,131,7303,904,2702,915,1701,10405,713,16601,5611,5613,8701,10,1802,21,1307,5411,42,6701,309,8501,67,200018,9301,89,91,200030,200031,15202,2406,103,1904,1908,4213,16002,907,4512,4513,4002,4003,4004,4524,4525,1711,11701,705,706,14801,4306,3809,5603,2801,5107,2301,7,1805,802,36,807,301,17202,53,5703,3914,75,1108,4703,200033,105,110,4223,130,200066,133,7304,4501,5526,8107,3501,1726,1727,6604,6605,10702,3812,5609,5612,5616,3844,11,1804,13,15,5402,35,804,4903,4906,303,306,4404,310,63,3906,70,3916,1106,5204,8801,2404,104,200042,4204,109,200045,111,4214,2701,4001,10404,1702,8108,1714,5812,1719,3001,15803,4314,1501,4318,5602,2804,501,3833,3840,5634,4,5,4103,8,3856,17,18,3859,20,3604,3607,808,4904,45,302,17205,311,313,2105,6201,4410,2107,65,12101,73,200021,200026,200027,6504,107,16501,200064,7301,15504,13201,4510,8105,14001,1728,2501,2502,711,201,202,206,718,208,18901,2006,3806,3811,3826,2803,13301,3602,3858,3605,1305,3102,31,13602,4901,811,4907,314,4419,3401,74,83,1107,85,5205,605,5501,127,128,13701,903,16008,905,917,5530,2206,10402,8901,1503,3810,1009,5617,5630,9,12,18701,1301,22,3608,30,13101,6704,54,4416,1602,4421,5702,200008,5706,1105,87,601,7001,603,15201,200035,200036,200039,200043,12401,200056,125,16006,5514,5517,910,2204,10403,8103,3504,1721,15802,15805,13001,4304,209,2011,4316,16103,1002,1003,17901,5614,15601,503,5631,12802,3852,3606,1306,28,5404,29,9501,32,803,17701,4905,44,4406,57,2106,17212,3908,200015,5203,602,200037,19301,108,200051,118,1401,4219,16005,16007,909,9101,15502,401,5521,6801,404,4502,5529,8601,4509,4518,712,719,3807,3301,16101,16102,5608,5610,1004,1006,6901,5624,5629,3839,5632,6,16401,5405,13601,6706,2101,17208,58,3901,14401,200004,200007,200024,16003,200068,5508,200069,7302,906,16010,16011,5516,5518,912,913,15506,15510,4514,4006,5802,709,2503,3804,3805,7901,12001,3816,7402,11501,5105,502,4601,5625,3837,3838,3841,16901,3601,3101,805,9001,17201,4402,2102,3909,3911,5705,200010,200012,5201,200019,2902,5206,2905,200025,200040,19304,1901,200046,200047,200048,114,200054,4221,4222,9601,200067,132,16004,200070,200072,5512,5513,16009,5515,911,15505,406,4506,2205,6301,12701,2208,4515,4005,8104,16301,3502,5808,6603,4311,3803,4319,3815,1001,16105,5102,7406,7408,3825,7409,5621,504,17401,5628,3849,1803,1304,11801,1309,11301,43,6702,6705,17207,17209,60,200005,1101,1103,2901,2906,200028,200032,2401,101,8302,1906,200058,200059,200061,18301,200063,5503,16001,5507,200073,403,15508,4007,5807,5809,1202,18101,7101,15301,2504,203,6607,12501,2009,10201,3802,2012,3813,13801,3819,5103,3828,3830,3831,5623,12801,3842,4102,3848,3851,8203,3857,1302,18201,308,17206,312,10301,16701,3907,200006,13901,200022,17501,6502,19307,1905,4209,18801,200050,200052,4212,14201,200060,4220,200062,11401,5519,5522,17301,5527,5528,2203,2207,5801,5803,5804,4526,8112,1201,3505,1203,1205,1206,1207,5815,6601,14301,3808,3814,16104,7401,3818,3820,1005,3821,7407,5104,5106,15101,15102,3845,3847,3850,8202,12301,5401,5406,4902,2601,2104,17210,4417,1603,3910,200009,3913,200014,5202,200023,200034,19303,19305,4202,19308,8301,19309,4216,5505,5001,15501,15503,402,5523,15507,405,15509,4505,4519,4521,8106,5805,5817,15804,2007,2013,4317,12002,3302,3817,7403,7405,3822,3823,3824,9201,3827,3829,505,11001,3834,3846,5408,4401,2103,3902,3904,3905,3912,5707,200020,1109,2903,604,11101,12901,200038,19306,1902,19310,200049,200053,200055,11901,5502,5504,3201,5506,5509,5510,5511,5525,15001,15002,4507,12201,18601,5810,5813,5814,1208,9401,13501,4801,6602,17101,8401,2003,2008,3801,5101,1007,19201,14601,12601,19001,3903,5701,200011,1104,18001,2904,4211,5520,5524,19101,14501,4522,5806,5811,1204,15801,2002,2004,2005";

function download(filename, text) {
    var a = document.createElement('a');
    a.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    a.setAttribute('download', filename);

    a.click();
}

let result = {};

(async () => {
    let count = 1;
    for (let regionId of regionText.split(",")) {
        let resp = await fetch(`https://rivalregions.com/map/region_data_wars/${regionId}`).then(r => r.text());
        let match = resp.match(/(\{.+?\})/)[1];
        let clean = match.replace(/\'/g, "\"").replace(/(m[0-9]+)/g, "\"$1\"");

        let json = JSON.parse(clean);
        let neighbors = Object.entries(json).filter(([k, v]) => v !== "#FFFFFF").map(e => e[0].replace("m", ""));

        result[regionId] = neighbors;

        console.log(`#${count}: region ${regionId} was completed!`);
        count++;
    }

    download("AllWarNeighbor.json", JSON.stringify(result));
})();

